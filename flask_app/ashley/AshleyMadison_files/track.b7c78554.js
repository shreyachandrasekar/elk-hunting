function generateSignature(){for(var a="",b=0;5>b;b++)a+=navigator.userAgent+navigator.platform+navigator.appName+navigator.appCodeName+navigator.product;return window.btoa(window.btoa(a).substr(Math.round(a.length/2),55))}function getCountryCode(a){var b=a?a.toString():"??",c=countriesCodes[b];return c||"??"}function refreshFrameCookies(){if(window.navigator.cookieEnabled&&"undefined"!=typeof gtBaseUrl){var a=document.createElement("a");if(a.href=gtBaseUrl,location.hostname===a.hostname)return;for(var b=[],c=0;c<gtCookiesNames.length;c++){var d=gtCookiesNames[c],e=jQuery.cookie(d);e&&b.push(encodeURIComponent(d)+"="+encodeURIComponent(e))}$("body iframe#gotrack-frame").remove(),$("<iframe>",{src:gtBaseUrl+"app/public/gotrack.p?"+b.join("&"),id:"gotrack-frame",frameborder:0,width:0,height:0,scrolling:"no"}).appendTo($("body"))}}function setSourseCookiesFromParams(){for(var a=window.location.search.substring(1).split("&"),b={},c=0,d=a.length;d>c;c++)if(""!==a[c]){var e=a[c].split("="),f=decodeURIComponent(e[0]),g=decodeURIComponent(e[1]||"");traficSourceParams.indexOf(f)>-1&&(b[f]=g)}for(var h in b)b.hasOwnProperty(h)&&jQuery.cookie("gt_"+h,b[h],cookieOptions)}function initTracker(){setSourseCookiesFromParams(),trackTrafficSource=getTrafficSource(),trackSubSource=getSubSource()}function updateTrackingSession(){var a=jQuery.cookie("gt_session_id"),b=new Date;return b.setTime(Math.floor(Date.now())+60*trackingSessionMinutes*1e3),a||(a=generateTrackingSessionId(),sendNewSessionEvent(a)),jQuery.cookie("gt_session_id",a,{expires:b,path:"/"}),a}function generateTrackingSessionId(){return Math.floor(Date.now()).toString()+Math.floor(1e6*Math.random()+1).toString()}function initEvents(){initLinksClicks(),initFormsSubmit(),initCountryChange(),initLangChange(),initMobileSignUpForm()}function sendSignUpEvent(){var a=jQuery.cookie("gt_signup_pnum"),b=jQuery.cookie("gt_signup_pnum_sent");if("true"!==b&&a&&""!==a){sendOpenPageEvent();var c=cookieOptions,d=new Date;d.setTime(d.getTime()+3e5),c.expires=d,jQuery.cookie("gt_signup_pnum_sent","true",c),jQuery.cookie("gt_new_user","true",cookieOptions),sendNewSignupEvent(a)}}function initMobileSignUpForm(){var a=function(a){return a.replace("pinf_uio_app%2Fstructure%2Fm%2Fregister_main__","").replace("pinf_uio_app%2Fstructure%2Fmobile%2Fregister_main__","").replace("_value","")};$("form.mobile-registration input").blur(function(b){var c=b.target;""!==c.value&&sendFormFilledEvent(a(c.name),$("form#registration")[0])}),$("form.mobile-registration select").change(function(b){var c=b.target;sendFormFilledEvent(a(c.name))});for(var b=$(".error-icon-image"),c=0;c<b.length;c++){var d=b[c],e=$(d).parent().find("label")[0],f=$(e).attr("for");sendFormErrorEvent(a(f),d.title||"invalid field",$("form#registration")[0])}var g=$(".username-duplicate");g.length>0&&sendFormErrorEvent("username","Username in use",$("form#registration")[0])}function initPageCloseEvent(){window.onbeforeunload=function(){sendClosePageEvent()}}function updateNextLocation(a){var b=document.createElement("a");b.href=a;var c=location.hostname+location.pathname,d=b.hostname+b.pathname;c!=d&&setCurrentPage(a)}function initLinksClicks(){$('a[href!="#"]').click(function(){var a=$(this).attr("href");void 0!==a&&(updateNextLocation(a),sendLinkClickEvent($(this).text(),a))})}function initCountryChange(){$("#countrySelect").on("change",function(){sendChangeCountryEvent(this.value)})}function initLangChange(){$("#languageSelect").on("change",function(){sendChangeLangEvent(this.value)})}function initFormsSubmit(){$("form").on("submit",function(a){sendFormSubmitEvent(a.target)})}function setCurrentPage(a){var b=jQuery.cookie("gt_current_page");b||(b=""),jQuery.cookie("gt_previous_page",b,cookieOptions),jQuery.cookie("gt_current_page",encodeURIComponent(a),cookieOptions)}function getOrCreatePageId(){var a=jQuery.cookie("gt_current_page");if(void 0!==a&&null!==a&&""!==a)return a;var b=window.location.pathname+window.location.search;return setCurrentPage(b),b}function isNewPage(){return!0}function getPageCounter(){var a=jQuery.cookie("gt_current_page"),b=jQuery.cookie("gt_page_counter");if(!b||!a)return jQuery.cookie("gt_page_counter",1,cookieOptions),setCurrentPage(window.location.pathname+window.location.search),1;var c=parseInt(b);return decodeURIComponent(a)===window.location.pathname+window.location.search?c:(c++,jQuery.cookie("gt_page_counter",c,cookieOptions),setCurrentPage(window.location.pathname+window.location.search),resetEventCounter(),c)}function incEventCounter(){var a=getEventCounter();jQuery.cookie("gt_event_counter",a+1,cookieOptions)}function resetEventCounter(){jQuery.cookie("gt_event_counter",0,cookieOptions)}function getDefaultEvent(){var a;if(window.navigator.cookieEnabled){var b=getPageCounter(),c=jQuery.cookie("amvid"),d=jQuery.cookie("referer");(void 0===d||null===d)&&(d=""),a={data:{payload:{domain:window.location.hostname,page_id:getOrCreatePageId(),prev_page_id:jQuery.cookie("gt_previous_page"),lang:jQuery.cookie("lang"),country:getCountryCode(jQuery.cookie("country")),referer:encodeURIComponent(d),publisher:trackTrafficSource,sub_source:trackSubSource,page_counter:b,tracking_session_id:updateTrackingSession(),new_user:jQuery.cookie("gt_new_user")}}},a.data.vid=void 0!==c&&null!==c?c:"",a.data.uuid=""}else{var e=gtSignature;jQuery.ajax({type:"POST",url:("undefined"!=typeof gtBaseUrl?gtBaseUrl:currentHost)+"api/visitor/id",data:null,success:function(a){"undefined"!=typeof a.visitor_id&&(e=a.visitor_id)},async:!1}),a={data:{vid:e,payload:{cookiesEnabled:!1,domain:window.location.hostname,page_id:window.location.pathname+window.location.search}}}}return a}function getTrafficSource(){var a="ots",b=jQuery.cookie("gt_utm_source"),c=jQuery.cookie("gt_ac");return b?a="utm":c&&(a="affiliate"),a}function getSubSource(){var a={};if("ots"==trackTrafficSource)return a;switch(trackTrafficSource){case"utm":a={source:jQuery.cookie("gt_utm_source"),medium:jQuery.cookie("gt_utm_medium"),term:jQuery.cookie("gt_utm_term"),content:jQuery.cookie("gt_utm_content"),campaign:jQuery.cookie("gt_utm_campaign"),network:jQuery.cookie("gt_network")};break;case"affiliate":a={affiliate_id:jQuery.cookie("gt_ac"),subuser_id:jQuery.cookie("gt_subuserid"),keywords:jQuery.cookie("gt_keywords")}}return a}function setVid(a){var b=jQuery.cookie("amvid");b||(jQuery.cookie("gt_vid",a.vid,cookieOptions),setSessionStart(a))}function setSessionStart(a){void 0!==a.created_at&&null!==a.created_at&&jQuery.cookie("gt_vid_session_started",Math.round(Date.now()/1e3),cookieOptions)}function modifyEventCounter(a){window.navigator.cookieEnabled&&(incEventCounter(),a.data.payload.event_counter=getEventCounter())}function sendEvent(a){modifyEventCounter(a);var b=!1;if(window.XMLHttpRequest)b=new XMLHttpRequest;else{if(!window.ActiveXObject)return!1;try{b=new ActiveXObject("Msxml2.XMLHTTP")}catch(c){try{b=new ActiveXObject("Microsoft.XMLHTTP")}catch(d){}}}var e=Math.round(Date.now()/1e3);b.open("POST",urlTrack,!0),b.setRequestHeader("Content-Type","application/json; charset=UTF-8"),b.setRequestHeader("T-EVENT-ID",a.data.event_id),b.setRequestHeader("T-SUBEVENT-ID",a.data.sub_event_id),b.setRequestHeader("T-AM-VID",a.data.vid),b.setRequestHeader("T-UID",a.data.uuid),b.setRequestHeader("T-TIMESTAMP",e),b.setRequestHeader("T-SIGNATURE",gtSignature),b.setRequestHeader("T-TAG",landingType),b.send(JSON.stringify(a.data.payload))}function sendOpenPageEvent(){if(isNewPage()){var a=getDefaultEvent();a.data.event_id=gtLandersTopic,a.data.sub_event_id="page_open",sendEvent(a)}}function sendPageErrorsEvent(){for(var a=$(".error-text"),b=0;b<a.length;b++){var c=a[b];void 0!==c.innerText&&sendFormErrorEvent("page",c.innerText)}}function sendClosePageEvent(){var a=getDefaultEvent();a.data.event_id=gtLandersTopic,a.data.sub_event_id="page_close",sendEvent(a)}function sendVidCreatedEvent(){var a=getDefaultEvent();a.data.event_id=gtLandersTopic,a.data.sub_event_id="create_new_vid",sendEvent(a)}function sendLinkClickEvent(a,b){var c=getDefaultEvent();c.data.event_id=gtLandersTopic,c.data.sub_event_id="link_click",c.data.payload.next_page=b,c.data.payload.link_text=a,sendEvent(c)}function sendButtonClickEvent(a,b){var c=getDefaultEvent();c.data.event_id=gtLandersTopic,c.data.sub_event_id="button_click",c.data.payload.next_page=b,c.data.payload.link_text=a,sendEvent(c)}function sendChangeLangEvent(a){var b=getDefaultEvent();b.data.event_id=gtLandersTopic,b.data.sub_event_id="lang_change",b.data.payload.new_lang=a,sendEvent(b)}function sendChangeCountryEvent(a){var b=getDefaultEvent();b.data.event_id=gtLandersTopic,b.data.sub_event_id="country_change",b.data.payload.new_country=getCountryCode(a),sendEvent(b)}function sendFormSubmitEvent(a){var b=getDefaultEvent();b.data.event_id=gtLandersTopic,b.data.sub_event_id="form_submit",b.data.payload.form_id=a.id,b.data.payload.form_name=a.name,b.data.payload.form_action=a.action,b.data.payload.form_method=a.method,sendEvent(b)}function sendFormErrorEvent(a,b,c){var d=getDefaultEvent();d.data.event_id=gtLandersTopic,d.data.sub_event_id="form_error",d.data.payload.error_msg=b,d.data.payload.element=a,void 0!==c&&(d.data.payload.form_id=c.id,d.data.payload.form_name=c.name,d.data.payload.form_action=c.action,d.data.payload.form_method=c.method),sendEvent(d)}function sendFormFilledEvent(a,b){var c=getDefaultEvent();c.data.event_id=gtLandersTopic,c.data.sub_event_id="element_filled",c.data.payload.element=a,void 0!==b&&(c.data.payload.form_id=b.id,c.data.payload.form_name=b.name,c.data.payload.form_action=b.action,c.data.payload.form_method=b.method),sendEvent(c)}function sendFailedSignupFormEvent(a,b,c){var d=getDefaultEvent();d.data.event_id=gtLandersTopic,d.data.sub_event_id="failed_signup_form",d.data.payload.valid_elements=a,d.data.payload.invalid_elements=b,void 0!==c&&(d.data.payload.form_id=c.id,d.data.payload.form_name=c.name,d.data.payload.form_action=c.action,d.data.payload.form_method=c.method),sendEvent(d)}function sendNewSignupEvent(a){var b=getDefaultEvent();b.data.event_id=gtLandersTopic,b.data.sub_event_id="new_signup",b.data.uuid=a,""!==b.data.vid&&sendEvent(b)}function sendNewSessionEvent(a){if(window.navigator.cookieEnabled){var b=getPageCounter(),c=jQuery.cookie("amvid"),d=jQuery.cookie("referer");(void 0===d||null===d)&&(d="");var e={data:{payload:{domain:window.location.hostname,page_id:getOrCreatePageId(),prev_page_id:jQuery.cookie("gt_previous_page"),lang:jQuery.cookie("lang"),country:getCountryCode(jQuery.cookie("country")),referer:encodeURIComponent(d),publisher:trackTrafficSource,sub_source:trackSubSource,page_counter:b,tracking_session_id:a,new_user:jQuery.cookie("gt_new_user")}}};e.data.vid=void 0!==c&&null!==c?c:"",e.data.uuid="",e.data.event_id=gtLandersTopic,e.data.sub_event_id="session-start",sendEvent(e)}}var currentHost=window.location.protocol+"//"+window.location.host+"/",urlTrack=("undefined"!=typeof gtBaseUrlApi?gtBaseUrlApi:currentHost)+"tracker/v1/events",trackTrafficSource="ots",trackSubSource={},cookieOptions={path:"/",domain:window.location.hostname},countriesCodes={1:"US",2:"CA",3:"GB",4:"IE",5:"AU",6:"NZ",7:"DE",8:"AT",9:"CH",10:"SE",11:"ES",12:"DK",13:"FI",14:"NR",15:"BR",16:"IT",17:"MX",18:"NL",19:"AR",20:"CO",21:"CL",22:"VE",23:"ZA",24:"FR",25:"BE",26:"GR",27:"JP",28:"IN",29:"PT",30:"HK",31:"TW",32:"SG",33:"PE",34:"LU",35:"IL",36:"KR",37:"MO",38:"SK",39:"PL",40:"HU",41:"CZ",42:"TR",43:"CN",44:"PK",45:"PH",46:"TH",47:"RU",48:"UA",49:"LV",50:"KZ",51:"BY",52:"EE",53:"UR"},gtCookiesNames=["gt_current_page","gt_vid_session_started","gt_event_counter","gt_vid","gt_previous_page","gt_page_counter","gt_ac","gt_keywords","gt_subuserid","gt_utm_source","gt_utm_medium","gt_utm_term","gt_utm_content","gt_utm_campaign","gt_network","gt_session_id"],traficSourceParams=["ac","keywords","subuserid","utm_source","utm_medium","utm_term","utm_content","utm_campaign","network"],gtLandersTopic="landers",gtSignature=generateSignature(),landingType="desktop-legacy-landing",trackingSessionMinutes=60,getEventCounter=function(){var a=jQuery.cookie("gt_event_counter");return a?parseInt(a):0};$(document).ready(function(){gtTrackAllEvents===!0&&(initTracker(),initEvents(),sendOpenPageEvent(),sendPageErrorsEvent()),gtTrackSignUp===!0&&(initTracker(),sendSignUpEvent())});